<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gamegram – Play Web Games Instantly</title>

  <meta name="description" content="Gamegram is your hub for fast, fun web-based games. No installs, no delays. Just pure gaming!">
  <meta name="robots" content="index, follow">
  <meta name="author" content="Gamegram Team">
  <meta name="theme-color" content="#6600cc">
  <meta name="bitmedia-site-verification" content="908ef0a98239d954fc5835e68d271c72" />

  <link rel="icon" type="image/png" href="images/gamegram.png" />
  <link rel="canonical" href="https://gamegramplay.github.io/GameGram-website/" />
  <link rel="manifest" href="/manifest.json" />
  <link rel="stylesheet" href="style.css?v=4" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet" />
    <!-- Popup Modal -->
  <div id="popup" class="popup-overlay">
    <div class="popup-window">
      <span class="close-button" id="closePopup">&times;</span>
      <h2>Welcome to Gamegram!</h2>
      <p>Advertise on our website, with long time players! aeahb003805mg@ahbs.ae</p>
    </div>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const popup = document.getElementById("popup");
      const closeBtn = document.getElementById("closePopup");
  
      // Show popup after 1 second
      setTimeout(() => {
        popup.style.display = "flex";
      }, 1000);
  
      // Close popup when "×" is clicked
      closeBtn.addEventListener("click", () => {
        popup.style.display = "none";
      });
  
      // Close popup when clicking outside the window
      popup.addEventListener("click", (e) => {
        if (e.target === popup) {
          popup.style.display = "none";
        }
      });
  
      // Close popup on Escape key
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          popup.style.display = "none";
        }
      });
    });
  </script>
</head>
<body>
  <nav>
    <a href="index.html" class="active">Home</a>
    <a href="chat/">Chat</a>
    <a href="features/">Features</a>
    <a href="about/">About</a>
    <a href="lobby/">Online TicTacToe</a>
  </nav>

  <div class="title-bubble">INTRODUCING GAMEGRAM</div>

  <section class="waveform">
    <div class="bar"></div><div class="bar"></div><div class="bar"></div>
    <div class="bar"></div><div class="bar"></div><div class="bar"></div>
    <div class="bar"></div><div class="bar"></div><div class="bar"></div>
    <div class="bar"></div><div class="bar"></div><div class="bar"></div>
  </section>

  <p></p>
  <h>Visitor Counter:</h>
  <div id="visitor-counter" class="feature-bubble" aria-label="Visitor Counter">
    <img 
      src="https://profile-counter.glitch.me/GameGramPlay/count.svg" 
      alt="Visitor count badge" 
      width="220" 
      height="60" 
      style="border-radius: 30px;" 
    />
  </div>

  <main>
    <h2>Games List</h2>

    <!-- Search Bar -->
    <div class="search-container">
      <input type="text" id="searchInput" placeholder="Search games..." aria-label="Search games" />
    </div>

    <div class="game-grid" id="gameGrid">
      <div id="loadingSpinner" class="loading-spinner"></div>
    </div>
  </main>

  <div id="gameGrid"></div>
  <div id="paginationControls" style="display: none;">
    <button id="prevPage">Previous</button>
    <span id="pageInfo"></span>
    <button id="nextPage">Next</button>
  </div>
  <p></p>


  <iframe
    data-aa="2392592"
    src="//ad.a-ads.com/2392592?size=200x200"
    style="width:200px; height:200px; border:0; padding:0; overflow:hidden; background-color:transparent;"
    title="Advertisement"
    loading="lazy">
  </iframe>

  <footer>
    <p>Games from <a href="https://github.com/Metroxe/one-html-page-challenge" target="_blank" rel="noopener">One HTML Page Challenge</a>, <a href="https://definitelynotblocked.vercel.app/games/index.html" target="_blank" rel="noopener">Seraph</a>, etc</p>
    <p>// all games playable on this website are complete copyright & property of their respective owners \\</p>
  </footer>

  <!-- Game Fetch + Search + Keyboard -->
  <script>
    let allGames = [];
    let currentPage = 1;
    const gamesPerPage = 24;
  
    const showSpinner = () => {
      document.getElementById('loadingSpinner').style.display = 'block';
    };
  
    const hideSpinner = () => {
      document.getElementById('loadingSpinner').style.display = 'none';
    };
  
    const renderGames = (games, page = 1) => {
      const grid = document.getElementById("gameGrid");
      const pagination = document.getElementById("paginationControls");
      const pageInfo = document.getElementById("pageInfo");
      const prevBtn = document.getElementById("prevPage");
      const nextBtn = document.getElementById("nextPage");
  
      grid.innerHTML = "";
  
      if (games.length === 0) {
        grid.innerHTML = "<p>No games found.</p>";
        pagination.style.display = "none";
        return;
      }
  
      const totalPages = Math.ceil(games.length / gamesPerPage);
      currentPage = Math.min(Math.max(page, 1), totalPages);
  
      const start = (currentPage - 1) * gamesPerPage;
      const pageGames = games.slice(start, start + gamesPerPage);
  
      pageGames.forEach(game => {
        const a = document.createElement("a");
        a.href = game.fullUrl;
        a.className = "game-cube";
        a.target = "_blank";
        a.textContent = game.name;
        grid.appendChild(a);
      });
  
      pagination.style.display = "flex";
      pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
      prevBtn.disabled = currentPage === 1;
      nextBtn.disabled = currentPage === totalPages;
    };
  
    const loadLocalGames = () => {
      return fetch(`games/index.json?t=${Date.now()}`)
        .then(res => res.json())
        .then(data =>
          data.map(file => ({
            name: file.replace('.html', '').replace(/[-_]/g, ' '),
            fullUrl: `games/${file}`,
            source: 'local'
          }))
        );
    };

    const loadCouchfriendsGames = () => {
      const baseUrl = "https://couchfriends.com/src/games/";
    
      const couchGamesList = [
        "space-shooter/index.html",
        "breakout/index.html",
        "bombergirl/index.html",
        "space-gpt/index.html",
        "drakonas/index.html",
        "mad-science-tower-defense/index.html",
        "threejs-tower-defense/index.html",
        "asteroids/index.html",
        "soccer/index.html"
      ];
    
      return Promise.resolve(
        couchGamesList.map(file => ({
          name: file.replace('/index.html', '').replace(/[-_]/g, ' '),
          fullUrl: `${baseUrl}${file}`,
          source: 'couchfriends'
        }))
      );
    };

  
    const loadSeraphGames = () => {
      const gamesSiteBase = "https://games-site.github.io/projects/";
    
      const seraphGamesList = [
        "1v1.lol/index.html",
        "2048/index.html",
        "9007199254740992/index.html",
        "ages-of-conflict/index.html",
        "among-us/index.html",
        "a-small-world-cup/index.html",
        "baldis-basics/index.html",
        "ball-sort-puzzle/index.html",
        "basket-and-ball/index.html",
        "bitlife/index.html",
        "blackjack/index.html",
        "block-the-pig/index.html",
        "cell-machine/index.html",
        "chrome-dino/index.html",
        "circlo/index.html",
        "cookie-clicker/index.html",
        "core-ball/index.html",
        "crazy-cattle-3d/index.html",
        "cut-the-rope/index.html",
        "death-run-3d/index.html",
        "doodle-jump/index.html",
        "drift-boss/index.html",
        "drift-hunters/index.html",
        "eaglercraft/index.html",
        "edge-surf/index.html",
        "flappy-bird/index.html",
        "fruit-ninja/index.html",
        "geometry-dash/index.html",
        "google-feud/index.html",
        "google-snake/index.html",
        "hextris/index.html",
        "idle-breakout/index.html",
        "little-alchemy-2/index.html",
        "madalin-stunt-cars-2/index.html",
        "madalin-stunt-cars-3/index.html",
        "mario/index.html",
        "minecraft-classic/index.html",
        "minesweeper/index.html",
        "pacman/index.html",
        "paper-io-2/index.html",
        "papery-planes/index.html",
        "poker/index.html",
        "project-sand/index.html",
        "retro-bowl/index.html",
        "retro-bowl-college/index.html",
        "rocketpult/index.html",
        "rooftop-snipers/index.html",
        "sand-tetris/index.html",
        "save-the-doge/index.html",
        "slope/index.html",
        "smash-karts/index.html",
        "solitaire/index.html",
        "solitaire-ms/index.html",
        "stack/index.html",
        "subway-surfers/index.html",
        "tomb-of-the-mask/index.html",
        "waterworks/index.html",
        "we-become-what-we-behold/index.html",
        "fireboy-and-watergirl-1-forest/index.html",
        "fireboy-and-watergirl-2-light/index.html",
        "fireboy-and-watergirl-3-ice/index.html",
        "fireboy-and-watergirl-4-crystal/index.html",
        "fireboy-and-watergirl-5-elements/index.html",
        "fireboy-and-watergirl-6-fairy-tales/index.html",
        "fnaf-1/index.html",
        "fnaf-2/index.html",
        "fnaf-3/index.html",
        "fnaf-4/index.html",
        "sister-location/index.html",
        "fnaf-ucn/index.html",
        "moto-x3m/index.html",
        "moto-x3m-2/index.html",
        "moto-x3m-winter/index.html",
        "moto-x3m-pool-party/index.html",
        "moto-x3m-spooky-land/index.html",
        "ovo/index.html",
        "ovo-2/index.html",
        "ovo-dimensions/index.html",
        "basket-random/index.html",
        "boxing-random/index.html",
        "soccer-random/index.html",
        "volley-random/index.html",
        "snail-bob/index.html",
        "snail-bob-2/index.html",
        "snail-bob-3/index.html",
        "snail-bob-4/index.html",
        "snail-bob-5/index.html",
        "snail-bob-6/index.html",
        "snail-bob-7/index.html",
        "snail-bob-8/index.html",
        "vex-3/index.html",
        "vex-4/index.html",
        "vex-5/index.html",
        "vex-6/index.html"
      ];
    
      return Promise.resolve(
        seraphGamesList.map(file => ({
          name: file.replace('/index.html', '').replace(/[-_]/g, ' '),
          fullUrl: `${gamesSiteBase}${file}`,
          source: 'seraph'
        }))
      );
    };

  
    const loadGames = async () => {
      showSpinner();
    
      try {
        const [localGames, seraphGames, couchGames] = await Promise.all([
          loadLocalGames(),
          loadSeraphGames(),
          loadCouchfriendsGames() // Added Couchfriends games
        ]);
    
        // Combine all sources
        allGames = [...localGames, ...seraphGames, ...couchGames];
    
        if (!Array.isArray(allGames) || allGames.length === 0) {
          throw new Error("No games were returned from sources.");
        }
    
        // Render first page
        renderGames(allGames, 1);
      } catch (err) {
        console.error("⚠️ Error loading games:");
        console.error("Message:", err.message || err);
        console.error("Stack Trace:", err.stack || "No stack trace");
    
        const grid = document.getElementById("gameGrid");
        grid.innerHTML = `
          <p style="color: red;"><strong>⚠️ Failed to load games.</strong></p>
          <p>Error: ${err.message || err}</p>
          <p>Check the browser console (F12) for more information.</p>
          <ul style="font-size: 0.9em;">
            <li>Is <code>games/index.json</code> available?</li>
            <li>Are CORS settings or hosting issues preventing fetch?</li>
            <li>Are the external game lists defined properly?</li>
          </ul>
        `;
      } finally {
        hideSpinner();
      }
    };
  
    document.addEventListener("DOMContentLoaded", () => {
      loadGames();
  
      const searchInput = document.getElementById("searchInput");
      const prevBtn = document.getElementById("prevPage");
      const nextBtn = document.getElementById("nextPage");
  
      const getFilteredGames = () => {
        const query = searchInput.value.toLowerCase();
        return allGames.filter(game => game.name.toLowerCase().includes(query));
      };
  
      searchInput.addEventListener("input", () => {
        currentPage = 1;
        renderGames(getFilteredGames(), currentPage);
      });
  
      prevBtn.addEventListener("click", () => {
        if (currentPage > 1) {
          currentPage--;
          renderGames(getFilteredGames(), currentPage);
        }
      });
  
      nextBtn.addEventListener("click", () => {
        currentPage++;
        renderGames(getFilteredGames(), currentPage);
      });
  
      document.addEventListener("keydown", (e) => {
        if (e.key === '/' && document.activeElement !== searchInput) {
          e.preventDefault();
          searchInput.focus();
        } else if (e.key === 'Escape') {
          searchInput.value = "";
          searchInput.blur();
          currentPage = 1;
          renderGames(allGames, currentPage);
        }
      });
    });
  </script>

  <!-- Service Worker -->
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("/service-worker.js")
          .then(reg => console.log("Service worker registered:", reg))
          .catch(err => console.error("Service worker registration failed:", err));
      });
    }
  </script>

  <!-- Chat Widget -->
  <script id="cid0020000407496477604" data-cfasync="false" async src="//st.chatango.com/js/gz/emb.js" style="width: 200px;height: 300px;">
    {
      "handle": "gamegramapp",
      "arch": "js",
      "styles": {
        "a": "6600cc",
        "b": 100,
        "c": "FFFFFF",
        "d": "FFFFFF",
        "k": "6600cc",
        "l": "6600cc",
        "m": "6600cc",
        "n": "FFFFFF",
        "p": "10",
        "q": "6600cc",
        "r": 100,
        "cv": 1,
        "cvfnt": "'Avant Garde', Avantgarde, 'Century Gothic', CenturyGothic, AppleGothic, sans-serif",
        "cvfntsz": "15px",
        "cvfntw": "lighter",
        "cvbg": "6600cc",
        "cvw": 75,
        "cvh": 30
      }
    }
  </script>

  <noscript>
    <p style="text-align:center; color:red;">JavaScript is required to use Gamegram. Please enable JavaScript in your browser settings.</p>
  </noscript>

</body>
</html>

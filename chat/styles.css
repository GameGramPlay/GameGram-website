:root {
  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  --bg-dark: #36393f;
  --panel-dark: #2f3136;
  --bg-light: #f3f3f3;
  --panel-light: #e5e5e5;
  --accent: #5865f2;
  --accent-hover: #4752c4;
  --text-dark: #dcddde;
  --text-light: #2c2c2c;
  --muted-dark: #72767d;
  --muted-light: #555;
}

body[data-theme="dark"] { 
  background: var(--bg-dark); 
  color: var(--text-dark); 
}
body[data-theme="dark"] .sidebar,
body[data-theme="dark"] header,
body[data-theme="dark"] footer,
body[data-theme="dark"] #login .box,
body[data-theme="dark"] .modal-content { 
  background: var(--panel-dark); 
}

body[data-theme="light"] { 
  background: var(--bg-light); 
  color: var(--text-light); 
}
body[data-theme="light"] .sidebar,
body[data-theme="light"] header,
body[data-theme="light"] footer,
body[data-theme="light"] #login .box,
body[data-theme="light"] .modal-content { 
  background: var(--panel-light); 
}

body { 
  margin:0; display:flex; height:100vh; touch-action: manipulation; 
}

/* Sidebar */
.sidebar { width:240px; display:flex; flex-direction:column; }
.sidebar h2 { padding:12px; font-size:14px; text-transform:uppercase; margin:0; color:var(--muted-dark); }
#userList { flex:1; overflow-y:auto; padding:8px; }
.user { margin:4px 0; font-size:14px; font-weight:500; }

.self { display:flex; justify-content:space-between; align-items:center; padding:8px; border-top:1px solid #202225; }
.me { display:flex; flex-direction:column; font-size:13px; }
#settingsBtn { border:none; background:none; font-size:18px; cursor:pointer; color:var(--muted-dark); transition: color 0.2s; }
#settingsBtn:hover, #settingsBtn:focus-visible { color:var(--accent); outline: 2px solid var(--accent); border-radius:4px; }

/* Chat */
.chat { flex:1; display:flex; flex-direction:column; }
header { padding:12px; font-weight:bold; text-align:center; border-bottom:1px solid #202225; }
#messages { flex:1; overflow-y:auto; padding:12px; }
.msg { margin-bottom:10px; position:relative; padding:6px; border-radius:6px; }
.msg .meta { font-size:12px; color:var(--muted-dark); margin-bottom:2px; }
.msg .text { font-size:14px; line-height:1.4; }
.msg .nickname { font-weight:600; margin-right:6px; }
.system { text-align:center; font-size:12px; margin:8px 0; }
footer { padding:12px; display:flex; gap:8px; border-top:1px solid #202225; }
input[type=text] { 
  flex:1; padding:8px; border:none; border-radius:4px; 
  background:#40444b; color:var(--text-dark); 
  outline:none; transition: background 0.2s; 
}
input[type=text]:focus-visible { 
  outline:2px solid var(--accent); 
}

/* Buttons */
button { 
  padding:8px 12px; border:none; border-radius:4px; 
  background:var(--accent); color:white; cursor:pointer; 
  transition: all 0.2s ease; 
}
button:hover, button:focus-visible { 
  background: var(--accent-hover); 
  outline: 2px solid var(--accent); 
  transform:translateY(-1px);
}
button:active { transform:translateY(0); }

/* Login */
#login { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; }
#login .box { padding:22px; border-radius:8px; width:300px; }
#login h1 { margin-top:0; font-size:20px; }
/* Login inputs and button */
#login input, #login button { 
  width: 100%; 
  margin-top: 12px; 
  padding: 12px;          /* Increase padding for bigger hitbox */
  font-size: 16px;        /* Larger text makes typing easier */
  border-radius: 8px; 
  box-sizing: border-box; 
}

/* Optional: focus outline for accessibility */
#login input:focus-visible { 
  outline: 2px solid var(--accent); 
}


/* Big join button */
.big-btn { 
  width:100%; padding:18px; font-size:18px; border:none; border-radius:8px; 
  background:#5865f2; color:#fff; cursor:pointer; font-weight:bold; transition:0.2s; 
}
.big-btn:hover, .big-btn:focus-visible { 
  background:#4752c4; outline: 2px solid #fff; 
}
.big-btn:active { transform:translateY(1px); }

/* Reactions */
.reactions { display:flex; gap:6px; margin-top:4px; }
.reaction { background:#40444b; padding:2px 6px; border-radius:8px; font-size:12px; cursor:pointer; }
.reaction:hover, .reaction:focus-visible { background:var(--accent); outline:2px solid var(--accent); }

/* Reaction bar (hidden until hover) */
.reaction-bar {
  display:none;
  position:absolute;
  bottom:2px;
  right:4px;
  background:rgba(0,0,0,0.6);
  border-radius:6px;
  padding:2px 4px;
  gap:4px;
  font-size:14px;
}
.msg:hover .reaction-bar { display:flex; }

/* Modal */
.modal { position:fixed; inset:0; background:rgba(0,0,0,0.6); display:flex; justify-content:center; align-items:center; }
.hidden { display:none; }
.modal-content { padding:20px; border-radius:8px; width:300px; }
.modal-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
.modal-header h2 { margin:0; }
#closeSettings { background:none; border:none; font-size:16px; cursor:pointer; color:var(--muted-dark); }
#closeSettings:hover, #closeSettings:focus-visible { color:var(--accent); outline:2px solid var(--accent); }

/* Message styles */
body[data-msgstyle="compact"] .msg { margin-bottom:4px; }
body[data-msgstyle="compact"] .msg .text { font-size:12px; line-height:1.2; }

/* Smooth message animations for new messages only */
.msg.new { transform:translateY(5px); transition:all 0.25s ease; }
.msg.new.show { opacity:1; transform:translateY(0); }
.msg { opacity:1; transform:translateY(0); }

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  * { transition:none !important; animation:none !important; }
}
